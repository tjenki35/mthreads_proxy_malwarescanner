package proxy;

import java.util.regex.Matcher;

/**
 *
 * @author Torie Jenkins u1038290
 */
public class HttpResponse extends Message {

    public int status;
    public String reasonPhrase;
    private String http;

    public HttpResponse() {
        super();
    }

    @Override
    public String pack() throws ParseException {
        String response = protocol + " " + status + " " + reasonPhrase + "\r\n";
        return response + super.pack();
    }

    @Override
    protected void parseArguments(String line) throws ParseException {
        Matcher match = REGEX_RESPONSE.matcher(line);
        if (match.find()) {
            protocol = match.group(1);
            status = Integer.parseInt(match.group(2));
            reasonPhrase = match.group(3);
        } else {
            throw new ParseException("Invalid Args: " + line);
        }
    }

    @Override
    protected Matcher parseHeader(String line) throws ParseException {
        Matcher match = super.parseHeader(line);
        String type = match.group(1).toLowerCase();
        String value = match.group(2);
        if (type.contains("content-type")) {
            contentType = value;
        }
        headers.add(line);
        return match;
    }
}
